import { getCollection } from 'astro:content';
import Base from '../../layouts/BaseLayout.astro'; // Import BaseLayout

const events = await getCollection('events');
const upcoming = events
  .filter(e => new Date(e.data.date) >= new Date())
  .sort((a, b) => +new Date(a.data.date) - +new Date(b.data.date));

const pageTitle = 'Mindful Ina – Upcoming Events';

<Base title={pageTitle}>
  <h1 class="text-3xl font-bold mb-8 text-center">Upcoming Events</h1>
  {upcoming.length > 0 ? (
    <ul class="space-y-6">
      {upcoming.map(event => (
        <li class="bg-white/60 backdrop-blur-md p-6 rounded-2xl shadow-lg">
          <a href={`/events/${event.slug}`} class="text-xl font-semibold no-underline hover:underline block mb-2">{event.data.title}</a>
          <p class="text-sm text-gray-700">{new Date(event.data.date).toLocaleString('en-US',{dateStyle:'full',timeStyle:'short'})}</p>
          <p class="text-sm text-gray-700">{event.data.location}</p>
        </li>
      ))}
    </ul>
  ) : (
    <div class="bg-white/60 backdrop-blur-md p-8 rounded-2xl shadow-lg text-center">
      <p>No upcoming events scheduled. Please check back later!</p>
    </div>
  )}
  <div class="text-center">
    <a href="/" class="mt-8 inline-block">← Back to Next Event</a>
  </div>
</Base> 