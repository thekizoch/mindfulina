---
import { getCollection } from 'astro:content';
import Event from '../../layouts/EventLayout.astro';

export async function getStaticPaths() {
  const events = await getCollection('events');
  return events.map(event => ({
    params: { slug: event.slug }, props: { event },
  }));
}

const { event } = Astro.props;
const { Content } = await event.render();
const pageTitle = `Mindfulina – ${event.data.title}`;
---

<Event title={pageTitle}>
  <article class="bg-white/60 backdrop-blur-md p-8 rounded-2xl shadow-lg">
    <h1 class="text-3xl font-bold mb-4">{event.data.title}</h1>
    <p><strong>When:</strong> {new Date(event.data.date).toLocaleString('en-US',{dateStyle:'full',timeStyle:'short'})}</p>
    <p><strong>Where:</strong> {event.data.location}</p>
    <!-- Display cover image if available -->
    {event.data.cover && <img src={event.data.cover} alt={event.data.title + " cover image"} class="my-4 rounded-lg" />}
    <div class="prose mt-6">
      <Content />
    </div>
    <div class="text-center">
      <a href="/events" class="mt-8 inline-block">← Back to All Events</a>
    </div>
  </article>
</Event> 